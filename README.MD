# å·¥å…·ç±»-ç®€åŒ–steamæ“ä½œ

> åŠŸèƒ½åˆ—è¡¨ï¼š
> 1. é€šè¿‡ç®€å•çš„æ–¹å¼å®Œæˆæµ åˆ†ç»„ã€å¾ªç¯
> 2. åˆ—è¡¨å¯¹æ¯”

## ğŸ“¦å®‰è£…

### ğŸŠMaven
åœ¨é¡¹ç›®çš„pom.xmlçš„dependenciesä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹:

```xml
<!-- https://mvnrepository.com/artifact/io.github.cShen-code/shen-tool -->
<dependency>
    <groupId>io.github.cShen-code</groupId>
    <artifactId>shen-tool</artifactId>
    <version>2.0.3-RELEASE</version>
</dependency>
```

### ğŸGradle
```
// https://mvnrepository.com/artifact/io.github.cShen-code/shen-tool
implementation group: 'io.github.cShen-code', name: 'shen-tool', version: '2.0.3-RELEASE'
```

### ğŸ“¥ä¸‹è½½jar

ç‚¹å‡»ä»¥ä¸‹é“¾æ¥ï¼Œä¸‹è½½`shen-tool-X.X.X.jar`å³å¯ï¼š

- [Mavenä¸­å¤®åº“](https://repo1.maven.org/maven2/io/github/cShen-code/shen-tool/2.0.3-RELEASE/)


## åŸºç¡€ç”¨æ³•
```java
@Data
@AllArgsConstructor
@NoArgsConstructor
public class TestBean {
    private Long id;
    private String name;

}

List<TestBean> testBeanList = new ArrayList<>();
testBeanList.add(new TestBean(1L, "one"));
testBeanList.add(new TestBean(3L, "three"));
testBeanList.add(new TestBean(4L, "four"));
testBeanList.add(new TestBean(4L, "four1"));
testBeanList.add(new TestBean(2L, "two"));


åˆ†ç»„ï¼Œæ¯ç»„å–ç¬¬ä¸€ä¸ª
Stream<TestBean> stream = testBeanList.stream();
Map<Long, TestBean> collect = stream
    .collect(CollectorUtil.groupAndFist(TestBean::getId));
System.out.println(JSON.toJSONString(collect));

è¾“å‡ºç»“æœï¼š
{1:{"id":1,"name":"one"},2:{"id":2,"name":"two"},3:{"id":3,"name":"three"},4:{"id":4,"name":"four"}}


// åˆ†ç»„ï¼Œç»„å†…é€šè¿‡idæ’åº
Map<Long, List<TestBean>> collect = testBeanList.stream()
    .collect(CollectorUtil
        .groupAndSort(TestBean::getId, (v1, v2) -> {
        //å€’å™
            return (int) (v2.getId() - v1.getId());
        }));
System.out.println(JSON.toJSONString(collect));

è¾“å‡ºç»“æœï¼š
{1:[{"id":1,"name":"one"}],2:[{"id":2,"name":"two"}],3:[{"id":3,"name":"three"}],4:[{"id":4,"name":"four"},{"id":4,"name":"four1"}]}

å¸¦ä¸‹æ ‡çš„peek
long count = CollectorUtil.peekI(testBeanList.stream(), (v, i) -> {
    System.out.println(v);
    System.out.println(i);
}).count();
```

## åˆ—è¡¨å¯¹æ¯”
```java
List<ListCompareBean> oldCompareBeanList = new ArrayList<>();
oldCompareBeanList.add(new ListCompareBean(1L, "test1"));
oldCompareBeanList.add(new ListCompareBean(2L, "test2"));

List<ListCompareBean> newCompareBeanList = new ArrayList<>();
newCompareBeanList.add(new ListCompareBean(1L, "updateTest1"));
newCompareBeanList.add(new ListCompareBean(3L, "test3"));

ListCompareUtil.builder(oldCompareBeanList, newCompareBeanList, ListCompareBean::getId)
        // æ‰¹é‡å›è°ƒ
        .whenInsert(list -> {
            // è¿›è¡Œormæ“ä½œ
            System.out.println("æ–°å¢ï¼š" + JSON.toJSONString(list));
        })
        .whenUpdate(list -> {
            System.out.println("æ›´æ–°ï¼š" + JSON.toJSONString(list));
        })
        .whenRemove(list -> {
            // idåˆ—è¡¨
            System.out.println("åˆ é™¤ï¼š" + JSON.toJSONString(list));
        })
        .compare();

ListCompareUtil.builder(oldCompareBeanList, newCompareBeanList, ListCompareBean::getId)
        // å•ä¸ªå›è°ƒï¼Œforå¾ªç¯æŒ¨ä¸ªå›è°ƒ
        .whenInsertOne(one -> {
            System.out.println("å•ä¸ªæ–°å¢ï¼š" + JSON.toJSONString(one));
            return 0;
        })
        .whenUpdateOne(one -> {
            System.out.println("å•ä¸ªæ›´æ–°ï¼š" + JSON.toJSONString(one));
            return 0;
        })
        .whenRemoveOne(one -> {
            System.out.println("å•ä¸ªåˆ é™¤ï¼š" + JSON.toJSONString(one));
            return 0;
        })
        .compare();

```